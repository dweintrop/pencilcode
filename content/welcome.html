<!doctype html>
<html>
<head>
<title>Pencil Code</title>
<meta name="description" content="Pencil is a collaborative programming site for drawing art, playing music, and creating games. Pencil is also a place to experiment with mathematical functions, geometry, graphing, webpages, simulations, and algorithms. Programs are open for all to see and copy.">
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lato:400|Source+Code+Pro:400,700">
<link rel="stylesheet" type="text/css" href="/nuLogin.css">
<link rel="stylesheet" type="text/css" href="/lib/selectBoxIt.css">
<link rel="icon" sizes="192x192" href="/apple-touch-icon.png">
<link rel="shortcut icon" sizes="16x16" href="/favicon.ico" />
<style>
</style>
<body>

</div>
<!-- end of overlay -->

<div class="container shadowcard">
<div class="row">
<div class="col-xs-6 vpadding">
<!-- branding -->
<a class="pclogo pull-left aboutlink" href="http://pencilcode.net" target="_blank"><div class="pctext"><div class="pcline1">Pencil</div><div class="pcline2">Code</div></div><img src="/image/vpencil-20-64.png"></a>
</div>

<div class="col-xs-6 vpadding">
</div>

</div>
<!--# include file="promoline.html" -->
<!-- splash row -->
<div class="row topline">
<div class="col-sm-6 vpadding">

<div id="student-login">

  <h2 class="text-center" style="color:#4e015c;">Student Login <span class="toggle-login">(not a student?)</span></h2>

  <div class="row">
    <div class="input-label col-sm-4 text-right"> 
      Class: 
    </div>
    <div class="col-sm-6">
      <select class="selectBoxIt" name="class_dropdown" id="class_dropdown">
        <option value="">Please Select Class:</option>
        <option value="Lane Tech College Prep - Period 4">Lane Tech College Prep - Period 4</option>
        <option value="Lane Tech College Prep - Period 7">Lane Tech College Prep - Period 7</option>
        <option value="Lane Tech College Prep - Period 8">Lane Tech College Prep - Period 8</option>
        <option value="Lindbloom - CT4G">Lindblom CT4G '14 - '15</option>
        <option value="Lindblom - CT4Gyr2">Lindblom CT4G '15 - '16</option>
        <option value="Northwestern">Northwestern University</option>
        <option value="Teachers College">Teachers College</option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="input-label col-sm-4 text-right"> 
      Student:
    </div>  
    <div class="col-sm-6"> 
      <select class="selectBoxIt" id="student_dropdown" name="student_dropdown" disabled>
        <option value="">Please Select Class:</option>
      </select>
    </div>
  </div>  

  <div class="row">
    <div class="input-label col-sm-4 text-right"> 
      Assignment:
    </div>  
    <div class="col-sm-6"> 
      <select class="selectBoxIt" id="assignment_dropdown" name="assignment_dropdown" disabled>
        <option value="">Please Select Assignment:</option>
      </select>
    </div>
  </div>
  
</div>

<div id="guest-login" style="display:none;">
  <h2 class="text-center" style="color:#4e015c;">
    Guest Login <span class="toggle-login">(Are you a student?)</span></h2>
  <div class="row">
    <div class="input-label col-sm-4 text-right"> 
      Name:
    </div>  
    <div class="col-sm-6">
      <input id="guest_name">
    </div>
  </div>
  <div class="row">
    &nbsp;
  </div>
</div>

<input id="user" style="display:none;">
<input type="password" id="pass" style="display:none;">
<input id="studentID" style="display:none;"/>
<input id="condition" style="display:none;"/>
<input id="assignment" style="display:none;"/>

<div class="col-sm-12 text-center">
  <span id="msg">&nbsp;</span>
</div>

<p style="text-align:center"><span id="login-btn" class="btn btn-primary" style="font-size:133%">Let's Go!</span>
</div>

<div class="col-sm-6 vpadding">
<iframe id="demo" style="min-height:300px;height:100%;width:100%;border:0"></iframe>
</div>
</div>


<div class="row topline">

  <div id="study_materials" class="study_materials">
    <div id="student_surveys" style="line-height:18pt">
      <h3 style="cursor:pointer; margin-bottom: 0; padding: 0;"><span id="survey-arrow" style="font-size:16px;">►</span>&nbsp;Student Resources</h3>
      <div class="study_materials_list">

        <h4>Lindblom CT4G</h4>
        <a href="/ct4gQuilt2015.html" target="_blank">2015 CT4G Quilt</a><br/>
        <a href="https://docs.google.com/forms/d/1cvm80x8LXEhtWpQmwgmtG_YkCXJ56C0W2qIvbpRqPaI/viewform" target="_blank"> Lindblom Student Questionnaire</a> <br/>    

        <h4>Lane Tech Programming I</h4>
        <a href="/laneQuilts2015.html" target="_blank">2015 Lane Tech Quilts</a><br/>
        <a href="/laneRadialArt2015.html" target="_blank">2015 Lane Tech Radial Art</a><br/>
        <a href="/laneFinalProjects2015.html" target="_blank">2015 Lane Tech Final Projects</a><br/>
        
        <a href="https://docs.google.com/forms/d/1gXJFtGHPVd6hkWoruSM83o7tPakigfhekZQx0emQ2do/viewform" target="_blank" class="online-forms-link"> Lane Tech Attitudinal Survey</a> <br/> 
        <a href="#" onclick="return openContentSurvey();"> Lane Tech Content Survey</a> <br/> 
        <div id="contentSurveyErrorMsg" style="display:none;padding-left: 15px;color: firebrick; margin-top: -10px;">Please select your name from the Student dropdown above before starting the survey.</div>

        <a href="https://docs.google.com/forms/d/1H_IIKKOruGwKDdtJV8ef8VxuyLpekZPfDkV7DfMGU68/viewform" target="_blank"> Out-of-class Interview Schedule Questionnaire</a> <br/>     

        <a href="studyDocs/parentConsent.pdf">Copy of the Parent Consent Form for the Pencil Code Study at Lane Tech</a><br/>
        <a href="studyDocs/studentAssent.pdf">Copy of the Student Assent Form for the Pencil Code Study at Lane Tech</a><br/>

        <!--
        <a href="https://docs.google.com/a/u.northwestern.edu/forms/d/19UOwdiAS5zPKTDA7Spx0io9JIQZB9r9yBBEYOGvtKh4/viewform" target="_blank"> Student Questionnaire (v. 3)</a> <br/>    
        <a href="#" onclick="window.location = (new Date().getTime() % 2 == 0) ? 'https://docs.google.com/a/u.northwestern.edu/forms/d/1PevJO1hKf_ofdA56iwfhVZKmPtffsPwPLA6Sd10dDak/viewform': 'https://docs.google.com/a/u.northwestern.edu/forms/d/1N5XYGyAOyAkgZOwi4RyKfkKQrFhOgFpZ-FhAKYjayD4/viewform';" target="_blank"> Programming Concepts Questionnaire (v. 3)</a> <br/>


        <a href="https://docs.google.com/a/u.northwestern.edu/forms/d/1fHZMBGWS5XrNPpQCduih0s6_MB6ymLSOE3HC6enks_w/viewform" target="_blank"> Exploring Computer Science Questionnaire</a> <br/>              
       -->
      </div>
    </div>
    
    <div id="student_resources" style="line-height:16pt">
      <h3 style="cursor:pointer; margin-bottom: 0; padding: 0;"><span id="resource-arrow" style="font-size:16px;">►</span>&nbsp;Computing Resources</h3>
      <div class="study_materials_list" style="line-height: 18pt;padding-top:12px;">
        <span style="font-size: 16pt;">Javac Setup</span>
        <div style="color:black; font-size: 11pt;padding:2px;">
        1. Download <a href="http://javaseer.herokuapp.com/setup/" style="padding-left:0px; text-decoration:underline;">this</a> file and save it.<br/>
        2. Open up a Terminal. To do this, open Launchpad by hitting the F4 button (at the top of the keyboard), then click on Other, the click on Terminal. <br/>
        3. When the terminal window opens, type: <span style="font-family:courier">cd Downloads</span> then hit return<br/>
        4. Type: <span style="font-family:courier">sh setup.sh [Your Student ID number] [Your Name]</span>.<br/>
        &nbsp;&nbsp;&nbsp;&nbsp; For example, if you played for the Cubs you might type: <span style="font-family:courier">sh setup.sh 49 Jake Arrieta</span><br/>
        5. You should see a message that says: "alias has been setup. please close then reopen the terminal."<br/> 
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If you do not see this message, please raise your hand.<br/>
        6. Close the terminal windown then open a new terminal window following the instructions in step 2.<br/>
        7. In the terminal, type: <span style="font-family:courier">javac testing</span><br/>
        </div>
      </div>
    </div>
    
  </div>
</div>

<div class="row topline">
<div class="col-sm-12 vpadding text-center">
  <a href="http://pencil.cc">pencil.cc</a> is a research project run by <a href="http://www.sesp.northwestern.edu/profile/?p=21536&/DavidWeintrop/" target="_blank">David Weintrop</a> designed to 
  understand the differences<br/>between blocks-based, text-based, 
  and hybrid blocks/text programming environments.<br/>
  It is built on top of the <a href="http://pencilcode.net/" target="_blank">Pencil Code</a> environment.<br/><br/>
  For more information about Pencil Code, including teacher materials, sample activites, <br/> and links to the source code, please visit the main <a href="http://pencilcode.net/" target="_blank">Pencil Code</a> site.<br/><br/>
  For more information about the study, please contact <a href="mailto:dweintrop@u.northwestern.edu">David Weintrop</a>.
</div>
</div>

</body>

<script src="/lib/jquery.js"></script>
<script src="/lib/jquery-ui.min.js"></script>
<script src="/lib/jquery.autocomplete.min.js"></script>
<script src="/lib/seedrandom.js"></script>
<script src="/lib/selectBoxIt.min.js"></script>
<script>
$(function() {

  function keyFromPassword(username, p) {
    if (!p) { return ''; }
    if (/^[0-9]{3}$/.test(p)) { return p; }
    var key = '';
    var prng = new Math.seedrandom('turtlebits:' + username + ':' + p + '.');
    for (var j = 0; j < 3; j++) {
      key += Math.floor(prng() * 10);
    }
    return key;
  }

  $('#login-btn').on('click', tryLogin);

  function tryLogin() {
    
    var user = $('#user').val().toLowerCase().trim();
    if (!user) {
      $('#msg').text('Please select name.');
      return;
    }

    if (!$('#assignment').val()) {
      $('#msg').text('Please select an assignment.');
      return;
    }

    if ($('#user').val() == 'nuguest' && !$('#guest_name').val().trim() ) {
      $('#msg').text('Please enter a name.');
      return;      
    }

    $('#msg').text('Logging in...');
    var urlRoot = '//' + user + '.' + location.hostname;
    var key = keyFromPassword(user, $('#pass').val());
    $.getJSON(urlRoot +
        '/save/?mode=setkey&key=' + key + '&data=' + key).done(function(resp) {
      if (resp.keyset) {
        var queryString = 'studentID=' + $('#studentID').val() 
            + '&condition=' + $('#condition').val()
            + '&assignment=' + $('#assignment').val();

        var filename = $('#assignment').val();
        // if guest login - go to different file based on entered name
        if ($('#user').val() == 'nuguest') {
          var filename = $('#guest_name').val().toLowerCase().replace(/ /g,'');
        } 
        
        // write study participant info to cookie so persists throughout session
        setCookie('studentID', $('#studentID').val(), 12);
        setCookie('condition', $('#condition').val(), 12);
        setCookie('assignment', $('#assignment').val(), 12);
        if (!!$('#guest_name').val()) {
          setCookie('name', 'PC Guest', 12);
        } else {
          setCookie('name', $('#student_dropdown')[0].options[$('#student_dropdown')[0].selectedIndex].text, 12);
        }
        setCookie('class', $('#class_dropdown').val(), 12);

        window.location = urlRoot + '/edit/' 
                + filename + '/#login=' + user + ':' + (key ? key : '') 
                + '?' + queryString;

      } else {
        $('#pass').select().focus();
        $('#msg').text('Wrong password.');
      }
    }).fail(function() {
      $('#msg').text('Network error.');
    });
  }

  function setCookie(cname, cvalue, exhours) {
      var d = new Date();
      d.setTime(d.getTime() + (exhours*60*60*1000));
      var expires = "expires="+d.toUTCString();
      document.cookie = cname + "=" + cvalue + "; " + expires + ";path=/;domain=" + location.hostname;
  }

  $(".toggle-login").on('click', function(e) {
    $("#student-login").toggle();
    $("#guest-login").toggle();
    $('#msg').text('');
    // just assume the default PC unless student overrides (maybe change this to hybrid in the future)
    $("#condition").val("default-PC");  
    $("#studentID").val("99");
    $("#user").val("nuguest");
    $("#pass").val("password");  
    $("#assignment").val("guest_play");
    $('#guest_name').val("");  
  });

  $("select").selectBoxIt({
    autoWidth: false
  });

  $( "#student_surveys" ).accordion({
    collapsible: true,
    active: false,
    autoHeight: true,
    beforeActivate: function( event, ui) {
      $('#survey-arrow').html( $('#survey-arrow').html() == '►' ? '▼' : '►');
      }
  });

  $( "#student_resources" ).accordion({
    collapsible: true,
    active: false,
    heightStyle: "content",
    beforeActivate: function( event, ui) {
      $('#resource-arrow').html( $('#resource-arrow').html() == '►' ? '▼' : '►');
    }
  });

  $("#class_dropdown").change(function(e, select){
    var val = select.selectbox.val();
    if (!val) {
      $('#student_dropdown')
        .prop('disabled', true)
        .data("selectBox-selectBoxIt")
        .remove()
        .add({vale: "", text: "Please Select Class"});
      $('#assignment_dropdown').data("selectBox-selectBoxIt").disable();
      return;
    }

    // get students
    $.ajax( {
      // url: 'http://localhost:8000/get_data/Students/',
      url: 'http://javaseer.herokuapp.com/get_data/Students/',
      dataType : 'json',
      data: {'filter': val} 
    })
      .done( function (data) {
        $('#student_dropdown')
          .prop('disabled', false)
          .data("selectBox-selectBoxIt")
          .remove()
          .add({ value: '', text: 'Please Select Your Name' })
        $(data['values']).each(function(index, element) {
          $('#student_dropdown').data("selectBox-selectBoxIt").add({ studentID: element.studentID, condition: element.condition, value: element.username, text: element.name, password: element.password });
        });
      $('#assignment_dropdown').data("selectBox-selectBoxIt").enable();

      // reset the hidden fields in case they were set by guest
      $("#user").val("");
      $("#assignment").val("");
    });

    // populate assignments
    if (val.indexOf("Lane") > -1) {
      assignments = [
        {value: "quilt", text: "1 - Quilt"},
        {value: "madlib", text: "2 - MadLibs"},
        {value: "tipcalc", text: "3 - Tip Calculator"},
        {value: "paintByQuad", text: "4 - Paint By Quadrant"},
        {value: "movieRecs", text: "5 - Movie Recommendations"},
        {value: "gradeRanger", text: "6 - Grade Range"},
        {value: "guessinggame", text: "7 - Guessing Game"},
        {value: "radialArt", text: "8 - Radial Art"},
        {value: "squiral", text: "9 - Squirals"},
        {value: "polygoner", text: "10 - Polygoner"},
        {value: "connect4", text: "11 - Connect 4"},
        {value: "brickwall", text: "12 - Brick Wall"},
        {value: "finalproject", text: "13 - Final Project"},
        {value: "Tinkering", text: "Tinkering"}
      ];
    } else if (val.indexOf("Lindb") > -1) {
      assignments = [
        {value: "pcDay1", text: "pcDay1"},
        {value: "pcDay2", text: "pcDay2"},
        {value: "pcDay3", text: "pcDay3"},
        {value: "Tinkering", text: "Tinkering"}
      ];
    } else if (val.indexOf("Teachers") > -1) {
      assignments = [
        {value: "quilt", text: "Quilt"},
        {value: "Tinkering", text: "Tinkering"}
      ];
    } else {
      assignments = [
        {value: "Tinkering", text: "Tinkering"}
      ];
    }
    $('#assignment_dropdown').data("selectBox-selectBoxIt").remove();      
    $('#assignment_dropdown').data("selectBox-selectBoxIt").add({ value: '', text: 'Please Select an Assignment' });
    $('#assignment_dropdown').data("selectBox-selectBoxIt").add(assignments);      
  });

  $("#student_dropdown").change(function(e, select) {
    var selected = this.options[this.selectedIndex]
    $("#user").val(selected.value);
    $("#pass").val(selected.getAttribute('password'));
    $("#condition").val(selected.getAttribute('condition'));
    $("#studentID").val(selected.getAttribute('studentID'));
    $('#contentSurveyErrorMsg').hide();
  });

  $("#assignment_dropdown").change(function(e, select){
    $('#assignment').val(select.selectbox.val());
  });

});

// open content survey based on student ID
function openContentSurvey(){
  if (!$('#studentID').val()) {
    $('#contentSurveyErrorMsg').show();
    return false;
  }

  // DW - note to future self: when going from pre->mid->post; don't move around URLs,
  //      just change the name of the variable to cycle through the three mappings
  // on pre - the order of these vars is: 0, 1, 2
  // on mid - the order of these vars is: 1, 2, 0
  // on post - the order of these vars is: 2, 0, 1
  // The goal here is that by the end of the 3rd assessment, each students will have seen each version

  // Survey A
  var contentSurveyURL2 = 'https://docs.google.com/a/u.northwestern.edu/forms/d/1ek37LYMUJn4w0jVN4QA_ae1G2Uk-9tXO_y0aEwHTajU/viewform';
  
  // Survey B
  var contentSurveyURL0 = 'https://docs.google.com/a/u.northwestern.edu/forms/d/1U0Pwko4d3uby8mQvSWyCwNHUACxuMEohqJ6tw8naxOw/viewform';

  // Survey C
  var contentSurveyURL1 = 'https://docs.google.com/a/u.northwestern.edu/forms/d/1__0dJb2WmDDksNpotQZRTykB4jvFzwLSsYb1QoWbGNA/viewform';

  var studentID = $('#studentID').val()
  var win = window.open(eval('contentSurveyURL' + studentID % 3), '_blank');
  win.focus();
  return true;
}


// Demo Animation
var index = 0;
var count = 3;
var sleeptime = +(new Date) + 100 * 1000;
function motion() {
  sleeptime = Math.max(sleeptime, +(new Date) + 30 * 1000);
}
function advance() {
  if (+(new Date) > sleeptime || $('#overlay').is(':visible')) return;
  document.getElementById('demo').src =
     "//promo.pencilcode.net/home/promo" + (index++);
  if (index >= count) { index = 0; }
}

// Now start the animation and things.
advance();
setInterval(advance, 26000);
window.addEventListener('mousemove', motion);
window.addEventListener('touchstart', motion);

// New account link
$('#newaccount').on('click', function() {
  window.location = '/edit/intro#new';
});

function preload(urls) {
  for (var i = 0; i < urls.length; ++i) {
    var o = new Image();
    o.src = urls[i];
  }
}

window.pencilcode = {domain: location.hostname};

setTimeout(function() {
  preload(['/editor.js', '/editor.css', '/folder_32.png', '/droplet.css',
           '/lib/ace/ace.js', '/lib/ace/mode-coffee.js',
           '/lib/ace/theme-chrome.js', ]);
}, 700);

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-63837731-1', 'auto');
ga('send', 'pageview');
</script>
</html>
